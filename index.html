<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Health Data Visualizations</title>
    
    <!-- D3.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <!-- PapaParse for CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }
        
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
            overflow-x: auto;
            padding: 0 20px;
        }
        
        .nav-tab {
            padding: 18px 28px;
            cursor: pointer;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 15px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-tab:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
            background: white;
        }
        
        .content-area {
            padding: 40px;
        }
        
        .chart-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .chart-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(15px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .chart-info {
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .chart-info h2 {
            color: #333;
            margin-bottom: 12px;
            font-size: 1.5em;
        }
        
        .chart-info p {
            color: #555;
            line-height: 1.7;
            font-size: 1.05em;
        }
        
        .chart-wrapper {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .chart-wrapper iframe {
            width: 100%;
            height: 750px;
            border: none;
            display: block;
        }
        
        .d3-chart-container {
            min-height: 600px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .loading {
            text-align: center;
            color: #666;
            font-size: 16px;
            padding: 60px 20px;
        }
        
        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        .error-message {
            background: #fee;
            border: 2px solid #fcc;
            padding: 20px;
            border-radius: 12px;
            color: #c33;
            margin: 20px 0;
            text-align: center;
        }
        
        .error-message strong {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .error-message code {
            background: rgba(0,0,0,0.05);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #d63384;
            font-size: 0.9em;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 13px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
        }
        
        .icon {
            font-size: 1.2em;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .nav-tab {
                padding: 15px 20px;
                font-size: 14px;
            }
            
            .content-area {
                padding: 20px;
            }
            
            .chart-wrapper iframe {
                height: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>Global Health Data Visualizations</h1>
            <p>Interactive analysis of health, wealth, and lifestyle factors across nations</p>
            <p2>Gokul Ramanan, Abhi Josyula, Pranav Thamil</p2>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showChart('about')">
                <span>About</span>
            </button>
            <button class="nav-tab" onclick="showChart('chart1')">
                <span>Fruit & Vegetables</span>
            </button>
            <button class="nav-tab" onclick="showChart('chart2')">
                <span>Wealth & Health</span>
            </button>
            <button class="nav-tab" onclick="showChart('chart3')">
                <span>Gov. Expenditure</span>
            </button>
            <button class="nav-tab" onclick="showChart('chart4')">
                <span>Sanitation (KDE)</span>
            </button>
            <button class="nav-tab" onclick="showChart('chart5')">
                <span>Healthcare Profession</span>
            </button>
        </div>
        
        <div class="content-area">
            <!-- About Section -->
            <div id="about" class="chart-section active">
                <div class="chart-info">
                    <h2>üìñ About This Project</h2>
                    <p style="margin-bottom: 20px;">This interactive dashboard explores the complex relationships between various health, economic, and lifestyle factors that influence life expectancy across nations. Through data visualization, we uncover patterns and insights from global health data.</p>
                </div>
                
                <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h3 style="color: #667eea; margin-bottom: 15px;">Project Overview</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 20px;">
                        This project analyzes global health data to understand what factors contribute to longer, healthier lives. 
                        By examining nutrition, wealth, government spending, sanitation, and healthcare infrastructure, 
                        we can identify key drivers of population health outcomes.
                    </p>
                    
                    <h3 style="color: #667eea; margin-bottom: 15px;">Visualizations</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                            <h4 style="margin-top: 0; color: #333;">Fruit & Vegetables</h4>
                            <p style="margin: 0; color: #666; font-size: 0.95em;">
                                Explores the relationship between fruit and vegetable consumption and life expectancy across continents.
                            </p>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                            <h4 style="margin-top: 0; color: #333;">Wealth & Health</h4>
                            <p style="margin: 0; color: #666; font-size: 0.95em;">
                                An animated view of how GDP per capita correlates with life expectancy over time (1990-2019).
                            </p>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                            <h4 style="margin-top: 0; color: #333;">Government Expenditure</h4>
                            <p style="margin: 0; color: #666; font-size: 0.95em;">
                                Compares health, education, and military spending with life expectancy outcomes.
                            </p>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                            <h4 style="margin-top: 0; color: #333;">Sanitation (KDE)</h4>
                            <p style="margin: 0; color: #666; font-size: 0.95em;">
                                A density visualization showing how sanitation access impacts population health.
                            </p>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                            <h4 style="margin-top: 0; color: #333;">Healthcare Professionals</h4>
                            <p style="margin: 0; color: #666; font-size: 0.95em;">
                                Analyzes the impact of healthcare workforce density on life expectancy.
                            </p>
                        </div>
                    </div>
                    
                    <h3 style="color: #667eea; margin-bottom: 15px;">References</h3>
                    <ul style="line-height: 1.8; color: #555;">
                        <li><a href="https://www.nature.com/articles/s41598-020-63843-6">Reference 1</a></li>
                        <li><a href="https://www.researchgate.net/publication/391397521_Factors_Influencing_Life_Expectancy_Global_Evidence_from_125_Countries">Reference 2</a></li>
                        
                    </ul>
                    
                    <h3 style="color: #667eea; margin-bottom: 15px;">Technologies Used</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
                        <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Python</span>
                        <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Altair</span>
                        <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">D3.js</span>
                        <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Pandas</span>
                        <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">HTML/CSS</span>
                    </div>
                    
                    <h3 style="color: #667eea; margin-bottom: 15px;">Data Source</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 20px;">
                        Our dataset is from Kaggle titled <a href="https://www.kaggle.com/datasets/miguelroca/global-health-nutrition-mortality-economic-data">‚ÄúGlobal Health, Nutrition, Mortality, Economic Data‚Äù</a>. 
                        The data covers the years 1990-2019 and is sourced from a combination of multiple international organizations. The main categories covered by the dataset include demographics & economy, 
                        mortality & life expectancy, public health, environmental health, nutrition, and healthcare infrastructure. The size of the data is around 10,000 values total with around 150 attributes. 
                    </p>

                    <h3 style="color: #667eea; margin-bottom: 15px;">Conclusion</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 10px;">
                        Overall, we found that there was a correlation (some stronger than others) from certain factors and the life expectancy of a population. For example, we found a strong correlation between 
                        the staffing of healthcare professionals (doctors and pharmacists in particular), and the overall life expectancy of a population through the boxplot visualization. However, due to a lack 
                        of data, there was not significant information regarding the effect of nurses & midwives staffing and the life expectancy. In terms of government expenditure, we found that the only factor 
                        that seemed to have a correlation to life expectancy was funding towards health, whereas funding to the military or education did not have a clear relationship to life expectancy. In terms 
                        of diet, there seemed to be a distinction between countries who had low and high fruit consumption, where countries who had higher fruit consumption often had longer life spans (on average).  
                        Generally, we found that certain regions such as Africa scored lower on most of the tested factors, resulting in lower life expectancies in comparison to western regions which scored higher 
                        on the tested factors and life expectancies. Overall, we noticed that income (GDP per capita) had one of the strongest impacts on life expectancy as the visualization showed an almost linear 
                        relationship (on a log scale). 
                    </p>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 0px;">
                        Using the information from the visualization, countries can understand which factors can be improved on to better the quality of life and overall life span of its citizens. The main suggestions 
                        I would make to countries looking to increase life span is to introduce economic policies that would allow for a greater GDP per capita, considering such factors seemed to have the strongest 
                        effect. I would also advise the encouragement of healthier diets through including more fruits and vegetables. Such encouragement could be done through continued funding in government expenditures 
                        towards health. Through more funding in the health industry, there could be more staff such as doctors and pharmacists. Overall, I would advise countries to prioritize their increase in GDP per 
                        capita as it would allow for more of the population to have greater access to healthcare or health facilities. 
                    </p>
                </div>
            </div>
            
            <!-- Chart 1: Fruit & Vegetables -->
            <div id="chart1" class="chart-section">
                <div class="chart-info">
                    <h2>Diet Composition: Fruit & Vegetables vs Life Expectancy</h2>
                    <p>This scatter plot explores the relationship between fruit and vegetable consumption (measured in kcal/person/day) and life expectancy across different countries and continents. The black LOWESS curve reveals the overall trend in the data.</p>
                </div>
                <div class="chart-wrapper">
                    <iframe src="charts/fruit_vegetable_life_expectancy.html"></iframe>
                    <h3 style="color: #667eea; margin-bottom: 15px;">Visualization Description:</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 0px;">
                        The x-values present the amount of calories in fruit & vegetables that a person may consume on average per day in a specific country. The y-values correlate to the average life expectancies of people in a specific country. 
                        The data is separated into regions to allow for better understanding of which regions overall follow certain patterns in terms of their dietary habits, allowing us to dissect the data further. Additionally, the visualization 
                        allows for zooming in and out for better clarity regarding data points in a specific region or quadrant. The purpose of the plot is to understand whether healthy dietary habits such as eating fruits/vegetables contribute 
                        positively to the average life span of individuals globally. 
                    </p>

                </div>
            </div>
            
            <!-- Chart 2: GDP Bubble Chart -->
            <div id="chart2" class="chart-section">
                <div class="chart-info">
                    <h2>The Wealth and Health of Nations</h2>
                    <p>An animated bubble chart showing the fascinating relationship between GDP per capita and life expectancy from 1990-2019. Bubble size represents population. Use the year slider to watch how countries evolved over three decades!</p>
                </div>
                <div class="chart-wrapper">
                    <iframe src="charts/gdp_life_expectancy_bubble_chart.html"></iframe>
                    <h3 style="color: #667eea; margin-bottom: 15px;">Visualization Description:</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 0px;">
                        The x-axis represents the GDP per capita (scaled to US dollars) of a nation. The y-axis represents the average life expectancy of a nation. The size of a data point is indicative of the population of a nation, allowing us to account 
                        for the population alongside the GDP per capita. The data is also separated by region to understand trends between regions and globally. Additionally, an animation between the countries and their GDP per capita over the years is used 
                        to display and interpret how changes in GDP affects the life expectancy within a country itself. The purpose of the visualization is to classify any trends or patterns between income and life expectancies. 
                    </p>

                </div>
            </div>
            
            <!-- Chart 3: Government Expenditure -->
            <div id="chart3" class="chart-section">
                <div class="chart-info">
                    <h2>Government Expenditure vs Life Expectancy</h2>
                    <p>Explore how different types of government spending correlate with life expectancy. Use the dropdown menu to switch between health, education, and military expenditure across continents.</p>
                </div>
                <div class="chart-wrapper">
                    <iframe src="charts/gov_expenditure_life_expectancy.html"></iframe>
                    <h3 style="color: #667eea; margin-bottom: 15px;">Visualization Description:</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 0px;">
                        There is one scatter plot. The x-values in the plot represent the amount of money (as a percentage of their overall budget) a government of a nation has allocated towards a certain expenditure, which can be altered through 
                        selecting in the drop-down tool. The y-values in the plot represent the average life expectancies of those nations where the government has spent a certain amount towards a sector. The purpose of the plot is to understand 
                        if there are trends globally or regionally between government expenditures and life expectancy. The plot separates the points into colors regionally to allow for better understanding of what the points represent and for 
                        readability.
                    </p>

                </div>
            </div>
            
            <!-- Chart 4: Sanitation KDE -->
            <div id="chart4" class="chart-section">
                <div class="chart-info">
                    <h2>Sanitation vs Life Expectancy (KDE Plot)</h2>
                    <p>A Kernel Density Estimation visualization showing the distribution and relationship between sanitation access and life expectancy. This D3.js interactive visualization provides detailed insights into this critical health factor.</p>
                </div>
                <div class="chart-wrapper">
                    <iframe src="charts/sanitation_kde.html"></iframe>
                    <h3 style="color: #667eea; margin-bottom: 15px;">Visualization Description:</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 0px;">
                        This density plot shows how safely managed sanitation relates to life expectancy across different countries and years. Each point represents a country-year observation, and the shaded density in the background helps show where most of the 
                        points are concentrated. Brighter areas indicate higher concentrations of observations. Using both the scatter points and the density layer makes it easier to see overall patterns compared to a basic scatterplot. The goal of this figure is 
                        to highlight the general relationship between sanitation access and longevity. Since there are many overlapping data points, the density shading helps reveal clusters and trends that might be hard to see otherwise.
                    </p>

                </div>
            </div>
            
            <!-- Chart 5: Healthcare Profession -->
            <div id="chart5" class="chart-section">
                <div class="chart-info">
                    <h2>Healthcare Professionals vs Life Expectancy</h2>
                    <p>Analyzing the impact of healthcare workforce density on population health outcomes across different nations and regions.</p>
                </div>
                <div class="chart-wrapper">
                    <iframe src="charts/healthcare_profession_life_expectancy.html"></iframe>
                    <h3 style="color: #667eea; margin-bottom: 15px;">Visualization Description:</h3>
                    <p style="line-height: 1.8; color: #555; margin-bottom: 0px;">
                        There are three separate box plots. Each boxplot represents a third of the life expectancies (sorted). As a result, the first 
                        box plot represents the lowest third of life expectancies globally. The second box plot represents the middle third, and the 
                        last box plot represents the upper third. Each boxplot showcases the spread of a healthcare staff member among the countries 
                        in those groups of life expectancies. The purpose of the data is to showcase the spread of healthcare staff for countries with 
                        lower life expectancies in contrast to those with higher life expectancies (on average). Healthcare staff members include doctors, 
                        pharmacists, and nurses & midwives. The visualization allows us to understand whether there is a correlation to healthcare staffing 
                        and life expectancies. 
                    </p>

                </div>
            </div>
        </div>
    </div>
    
    <div class="tooltip" id="tooltip"></div>

    <script>
        function showChart(chartId) {
            // Hide all chart sections
            document.querySelectorAll('.chart-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected chart
            document.getElementById(chartId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.closest('.nav-tab').classList.add('active');
        }
        
        // Handle iframe load errors
        document.querySelectorAll('iframe').forEach(iframe => {
            iframe.onerror = function() {
                const wrapper = this.parentElement;
                wrapper.innerHTML = `
                    <div class="error-message">
                        <strong>Chart Not Found</strong>
                        <p>Could not load: <code>${this.src}</code></p>
                        <p>Make sure your Python script has generated the chart files.</p>
                    </div>
                `;
            };
        });
    </script>
</body>
</html>